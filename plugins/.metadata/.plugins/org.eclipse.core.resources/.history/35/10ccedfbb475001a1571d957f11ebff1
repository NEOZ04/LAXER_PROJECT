<?php 

namespace laxer\player;

use pocketmine\event\Listener;
use pocketmine\event\player\PlayerJoinEvent;
use laxer\Core;
use laxer\timerank\PlayerTimeTask;

class PlayerListener implements Listener {
    
    public function onJoin(PlayerJoinEvent $e){
        $p = $e->getPlayer();
        $pd = new PlayerData($p->getName());
        $task = Core::getInstance()->getScheduler()->scheduleRepeatingTask(new PlayerTimeTask($pd), 16);
        Core::$_SESSIONS['player_time'][$p->getName()] = $task; 
    }
    
}