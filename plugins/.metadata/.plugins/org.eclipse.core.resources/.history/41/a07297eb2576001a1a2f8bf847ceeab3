<?php 

namespace laxer\pshop;

use pocketmine\Player;
use pocketmine\IPlayer;
use laxer\Core;

class PShop {
    
    
    
    public function createShop(Player $p){
        if ($p->hasPermission('laxer.pshop')){
            new Shop($p->getName());
        }
        return false;
    }
    
    public function resetShop(Player $p){
        $shop = $this->getShop($p->getName());
        return $shop->reset();
    }
    
    public function getShop(String $name){
        if ($this->hasCreated($name)) {
            return new Shop($name);
        }
        return null;
    }
    
    public function hasCreated(String $name){
        $hashname = hash('md5', $name);
        $filepath = Core::getInstance()->getDataFolder()."shops/".$hashname.".json";
        return file_exists($filepath);
    }
    
}